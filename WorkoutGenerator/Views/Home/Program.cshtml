@using WorkoutGenerator.Extentions
@model ProgramViewModel

<div class="container my-5">
    <div class="row d-flex justify-content-center">
        <div class="col-12 col-lg-6  d-flex flex-column">
            <div class="pb-4">
                <div class="d-flex">
                    <p class="font-weight-bold">
                        Program Type:
                        <span class="color-second font-weight-bold ml-2">@Model.TemplateViewModel.TemplateType.Description()</span>
                    </p>
                </div>
                <label class="font-weight-bold">Instructions:</label>
                <p>Workout should be done @Model.TemplateViewModel.DaysType.Description(). This program's difficulty is <span class="color-second font-weight-bold">@Model.TemplateViewModel.TrainerLevelType</span> </p>

            </div>
            @{
                @foreach (var workoutViewModel in Model.TemplateViewModel.Workouts)
                 {
                     <div class="card p-3 text-white bg-main mt-3">Workout @workoutViewModel.Name</div>

                     @foreach (var muscle in workoutViewModel.MuscleExerciseViewModels)
                      {
                          <div class="py-3">
                              <h3 style="letter-spacing: 1px; font-weight: 300;" class="mb-0 ">@muscle.MuscleType.ToString()</h3>
                              <hr class="my-2"/>
                          </div>
                          @foreach (var exercise in muscle.Exercises)
                           {
                               <div class="my-2 card p-3">

                                   <div>
                                       <p class="mb-1 " style="font-size: 17px; letter-spacing: 1px;">@exercise.Name</p>
                                   </div>
                                   <div class="d-inline-block">
                                       <a href="#" style="position: absolute;right: 10px; top: 10px;" class="videoModalTriger" data-toggle="modal" data-target="#videoModal" data-videoModal="https://www.youtube.com/embed/@exercise.YoutubeVideoId"> <i class="fab fa-youtube text-danger" style="font-size: 25px;"></i> </a>

                                   </div>
                                   <div class="d-flex">
                                       <p class="pr-3 mb-0">
                                           <span class="font-weight-bold color-main">Sets: </span>@exercise.Sets</p>
                                       <p class="pr-3 mb-0">
                                           <span class="font-weight-bold color-main ">Reps: </span>@exercise.Reps</p>
                                       <p class="mb-0">
                                           <span class="font-weight-bold color-main ">Rest: </span>@exercise.Rest</p>

                                   </div>
                               </div>
                           }
                      }
                 }
            }

        </div>


    </div>

    <div class="d-flex justify-content-center">
        <button id="scrollToTopBtn" class="btn bg-main text-white my-5">Scroll To Top</button>
    </div>

</div>


<div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            @*<button type="button" class="close btn-round btn-primary" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>*@
            <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="" allowfullscreen></iframe>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/lib/modal-video/modal-video.js"></script>
    <script>
        $(function() {
            $("#scrollToTopBtn").on('click',
                function() {
                    $('html,body').animate({ scrollTop: 0 }, 'slow');
                });

            $('.videoModalTriger').on('click',
                function() {
                    var theModal = $(this).data("target");
                    var videoSRC = $(this).attr("data-videoModal");
                    var videoSRCauto = videoSRC + "?autoplay=1";
                    $(theModal + ' iframe').attr('src', videoSRCauto);
                    $(theModal).on('hidden.bs.modal',
                        function(e) {
                            $(theModal + ' iframe').attr('src', '');
                        });
                });

        });
    </script>
}